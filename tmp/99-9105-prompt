<DIRECTIONS>
adapt this skill to the following framework:

---
name: my-skill
description: What this skill does and when to use it
---

# My Skill

Instructions for the agent to follow when this skill is activated.

## When to Use

Describe the scenarios where this skill should be used.

## Steps

1. First, do this
2. Then, do that


</DIRECTIONS>
<Context>
You receive a selection in neovim that you need to replace with new code.
The selection's contents may contain notes, incorporate the notes every time if there are some.
consider the context of the selection and what you are suppose to be implementing
<SELECTION_LOCATION>
range(point(1,1),point(77,1))
</SELECTION_LOCATION>
<SELECTION_CONTENT>
---
name: dev-script
description: Generate a dev.sh script that uses tmux to manage development services (dev server, database, etc.) with flags for clean, restart, down, and db-only modes.
argument-hint: "[project-name]"
disable-model-invocation: true
---

# Dev Script Generator

Generate a `dev.sh` bash script for the current project. The script uses **tmux** to manage development services in named sessions with split panes.

## Required Input

Ask the user for the following if not provided via `$ARGUMENTS` or context:

1. **Session/project name** — used as the tmux session name (e.g., `myapp`)
2. **Services to run** — what commands run in each pane (e.g., `bun dev`, `docker compose up`, `cargo watch`)
3. **Package manager** — for the `--clean` flag reinstall step (e.g., `bun`, `npm`, `pnpm`)
4. **Files to remove on clean** — lock files and dependency dirs to delete (e.g., `node_modules bun.lockb`)

## Script Structure

The generated `dev.sh` must follow this exact pattern:

```bash
#!/bin/bash
```

### 1. Argument parsing

Support these flags via a `for arg in "$@"` loop with `case`:

| Flag        | Variable    | Purpose                                      |
|-------------|-------------|----------------------------------------------|
| `--clean`   | `CLEAN`     | Full teardown: stop services, delete deps, reinstall, then start |
| `--db`      | `DB_ONLY`   | Start only the database/infrastructure service |
| `--restart` | `RESTART`   | Kill existing session and recreate            |
| `--down`    | `DOWN`      | Shut everything down and exit                 |

All default to `false`.

### 2. Session existence check

```bash
SESSION_EXISTS=false
if tmux has-session -t <name> 2>/dev/null; then
    SESSION_EXISTS=true
fi
```

### 3. Mode handlers (in this order)

**--down**: Kill tmux session if exists, stop infrastructure (e.g., `docker compose down`), then `exit 0`.

**--clean**: Kill session, stop infrastructure with `-v`, remove dependency files, reinstall, `sleep 1`, set `SESSION_EXISTS=false`. Does NOT exit — falls through to start.

**--db**: Kill existing session, create new session with only the infrastructure service, attach, `exit 0`.

**--restart / session exists**: Kill existing session, fall through to creation.

### 4. Session creation

- Create a detached tmux session with the first service in the first pane
- Split the window vertically for each additional service
- Select the first pane after setup
- Print what was created

### 5. Attach

```bash
tmux attach -t <name>
```

## Output

Write the script to `dev.sh` in the project root and make it executable with `chmod +x dev.sh`.

</SELECTION_CONTENT>
<FILE_CONTAINING_SELECTION>
---
name: dev-script
description: Generate a dev.sh script that uses tmux to manage development services (dev server, database, etc.) with flags for clean, restart, down, and db-only modes.
argument-hint: "[project-name]"
disable-model-invocation: true
---

# Dev Script Generator

Generate a `dev.sh` bash script for the current project. The script uses **tmux** to manage development services in named sessions with split panes.

## Required Input

Ask the user for the following if not provided via `$ARGUMENTS` or context:

1. **Session/project name** — used as the tmux session name (e.g., `myapp`)
2. **Services to run** — what commands run in each pane (e.g., `bun dev`, `docker compose up`, `cargo watch`)
3. **Package manager** — for the `--clean` flag reinstall step (e.g., `bun`, `npm`, `pnpm`)
4. **Files to remove on clean** — lock files and dependency dirs to delete (e.g., `node_modules bun.lockb`)

## Script Structure

The generated `dev.sh` must follow this exact pattern:

```bash
#!/bin/bash
```

### 1. Argument parsing

Support these flags via a `for arg in "$@"` loop with `case`:

| Flag        | Variable    | Purpose                                      |
|-------------|-------------|----------------------------------------------|
| `--clean`   | `CLEAN`     | Full teardown: stop services, delete deps, reinstall, then start |
| `--db`      | `DB_ONLY`   | Start only the database/infrastructure service |
| `--restart` | `RESTART`   | Kill existing session and recreate            |
| `--down`    | `DOWN`      | Shut everything down and exit                 |

All default to `false`.

### 2. Session existence check

```bash
SESSION_EXISTS=false
if tmux has-session -t <name> 2>/dev/null; then
    SESSION_EXISTS=true
fi
```

### 3. Mode handlers (in this order)

**--down**: Kill tmux session if exists, stop infrastructure (e.g., `docker compose down`), then `exit 0`.

**--clean**: Kill session, stop infrastructure with `-v`, remove dependency files, reinstall, `sleep 1`, set `SESSION_EXISTS=false`. Does NOT exit — falls through to start.

**--db**: Kill existing session, create new session with only the infrastructure service, attach, `exit 0`.

**--restart / session exists**: Kill existing session, fall through to creation.

### 4. Session creation

- Create a detached tmux session with the first service in the first pane
- Split the window vertically for each additional service
- Select the first pane after setup
- Print what was created

### 5. Attach

```bash
tmux attach -t <name>
```

## Output

Write the script to `dev.sh` in the project root and make it executable with `chmod +x dev.sh`.

</FILE_CONTAINING_SELECTION>

</Context>

<MustObey>
NEVER alter any file other than TEMP_FILE.
never provide the requested changes as conversational output. Return only the code.
ONLY provide requested changes by writing the change to TEMP_FILE

never attempt to read TEMP_FILE.  It is purely for output.  Previous contents, which may not exist, can be written over without worry
</MustObey>
<TEMP_FILE>/Users/raphael.luethy@fhnw.ch/Documents/projects/private/skills/tmp/99-9105</TEMP_FILE>